<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>十年后发现</title>
    <link rel="shortcut icon" href="favicon.ico"/>
    <link rel="stylesheet" href="find-css/base.css"/>
    <link rel="stylesheet" href="find-css/find.css"/>

    <style>
        body {
            background-color: #F4F4F4;
        }
    </style>
</head>
<body>
<div id="find">
    <!--顶部导航开始-->
    <div class="topnav clearfix">
        <div class="left">
            <ul>
                <li  class="current"><a href="javascript:void(0)">发现</a></li>
                <li><a href="find/find-2.html">动态</a></li>
                <li><a href="find/find-2.html">我的未来</a></li>
                <li>
                    <a href="###">
                        来往
                        <i><s>◇</s></i>
                    </a>

                </li>
            </ul>
        </div>
        <div class="middle">
            <a href="../login/login-index.html">十年后</a>
        </div>
        <div class="right">
            <a href="../login/login-index.html">注册</a>
            <a href="../login/login-index.html">登录</a>
        </div>

    </div>
    <!--顶部导航结束-->

    <!--主体部分 开始-->
    <div class="main">
        <!--版心-->
        <div class="w">
            <!--公共部分盒子-->
            <div class="public a1">
                <div class="public-box">
                    <h2>生活</h2>

                    <div class="btm-box">
                        <div class="btmleft">
                            <p class="p1">18571</p>

                            <p>梦想</p>
                        </div>
                        <div class="line"></div>
                        <div class="btmright">
                            <p class="p1">13072</p>

                            <p>动态</p>
                        </div>
                    </div>

                </div>
            </div>
            <div class="public a2">
                <div class="public-box">
                    <h2>学习</h2>

                    <div class="btm-box">
                        <div class="btmleft">
                            <p class="p1">18863</p>

                            <p>梦想</p>
                        </div>
                        <div class="line"></div>
                        <div class="btmright">
                            <p class="p1">24300</p>

                            <p>动态</p>
                        </div>
                    </div>
                </div>

            </div>
            <div class="public a3">
                <div class="public-box">
                    <h2>工作</h2>

                    <div class="btm-box">
                        <div class="btmleft">
                            <p class="p1">7187</p>

                            <p>梦想</p>
                        </div>
                        <div class="line"></div>
                        <div class="btmright">
                            <p class="p1">4937</p>

                            <p>动态</p>
                        </div>
                    </div>
                </div>

            </div>
            <div class="public clear a4">
                <div class="public-box">
                    <h2>创新</h2>

                    <div class="btm-box">
                        <div class="btmleft">
                            <p class="p1">2533</p>

                            <p>梦想</p>
                        </div>
                        <div class="line"></div>
                        <div class="btmright">
                            <p class="p1">2395</p>

                            <p>动态</p>
                        </div>
                    </div>
                </div>

            </div>
            <div class="public a5">
                <div class="public-box">
                    <h2>健康</h2>

                    <div class="btm-box">
                        <div class="btmleft">
                            <p class="p1">3020</p>

                            <p>梦想</p>
                        </div>
                        <div class="line"></div>
                        <div class="btmright">
                            <p class="p1">6637</p>

                            <p>动态</p>
                        </div>
                    </div>

                </div>

            </div>
            <div class="public a6">
                <div class="public-box">
                    <h2>旅行</h2>

                    <div class="btm-box">
                        <div class="btmleft">
                            <p class="p1">2383</p>

                            <p>梦想</p>
                        </div>
                        <div class="line"></div>
                        <div class="btmright">
                            <p class="p1">1816</p>

                            <p>动态</p>
                        </div>
                    </div>
                </div>

            </div>
            <div class="public a7">
                <div class="public-box">
                    <h2>文艺</h2>

                    <div class="btm-box">
                        <div class="btmleft">
                            <p class="p1">2615</p>

                            <p>梦想</p>
                        </div>
                        <div class="line"></div>
                        <div class="btmright">
                            <p class="p1">4835</p>

                            <p>动态</p>
                        </div>
                    </div>
                </div>

            </div>
            <div class="public clear a8">
                <div class="public-box">
                    <h2>情感</h2>

                    <div class="btm-box">
                        <div class="btmleft">
                            <p class="p1">2433</p>

                            <p>梦想</p>
                        </div>
                        <div class="line"></div>
                        <div class="btmright">
                            <p class="p1">2923</p>

                            <p>动态</p>
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </div>
    <!--主体部分 结束-->


    <!--内容展示 开始-->
    <div class="content">
        <div class="w">
            <div class="mt clearfix" id="title">
                <ul>
                    <li class="current"><a href="#">梦想</a></li>
                    <li><a href="#">梦想家</a></li>
                    <li><a href="#">动态</a></li>
                </ul>
            </div>
            <div class="mc" id="mc">
                <div class="mc1 clearfix">
                    <div class="pic">
                        <a><img src="images1/1.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>morning tones</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/2.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>vintage branch</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/3.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>Design Seeds</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/4.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>fresh hues no.95</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/5.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>flora tones</span></p>
                    </div>
                    <div class="pic ">
                        <a><img src="images1/6.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>petaled tones</span></p>
                    </div>
                    <div class="pic ">
                        <a><img src="images1/7.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>aboard color</span></p>

                    </div>
                    <div class="pic ">
                        <a><img src="images1/8.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>concrete tones</span></p>
                    </div>
                    <div class="pic ">
                        <a><img src="images1/9.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>sparkle tones</span></p>

                    </div>
                    <div class="pic ">
                        <a><img src="images1/10.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>beached hues</span></p>
                    </div>
                    <div class="pic ">
                        <a><img src="images1/11.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>bicycle hues</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/12.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>amethyst hues</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/13.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>mineral hues</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/14.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>wreath hues</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/15.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>petaled paper</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/17.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>winter tones</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/18.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>autumn hues</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/19.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>wreath hues</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/20.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>hydrangea hues</span></p>

                    </div>
                </div>
                <div class="mc2 ">
                    <div class="pic">
                        <a><img src="images1/5.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>flora tones</span></p>
                    </div>
                    <div class="pic ">
                        <a><img src="images1/6.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>petaled tones</span></p>
                    </div>
                    <div class="pic ">
                        <a><img src="images1/7.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>aboard color</span></p>

                    </div>
                    <div class="pic ">
                        <a><img src="images1/8.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>concrete tones</span></p>
                    </div>
                    <div class="pic ">
                        <a><img src="images1/9.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>sparkle tones</span></p>

                    </div>
                    <div class="pic ">
                        <a><img src="images1/10.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>beached hues</span></p>
                    </div>
                    <div class="pic ">
                        <a><img src="images1/11.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>bicycle hues</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/12.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>amethyst hues</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/13.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>mineral hues</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/14.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>wreath hues</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/15.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>petaled paper</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/17.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>winter tones</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/18.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>autumn hues</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/19.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>wreath hues</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/20.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>hydrangea hues</span></p>

                    </div>
                </div>
                <div class="mc3 ">
                    <div class="pic">
                        <a><img src="images1/14.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>wreath hues</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/15.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>petaled paper</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/17.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>winter tones</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/18.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>autumn hues</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/19.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>wreath hues</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/20.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>hydrangea hues</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/12.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>amethyst hues</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/13.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>mineral hues</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/14.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>wreath hues</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/15.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>petaled paper</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/17.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>winter tones</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/18.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>autumn hues</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/19.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>wreath hues</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/20.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>hydrangea hues</span></p>

                    </div>
                    <div class="pic">
                        <a><img src="images1/12.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>amethyst hues</span></p>
                    </div>
                    <div class="pic">
                        <a><img src="images1/13.jpg" alt=""/></a>

                        <p><img src="images1/pig.jpg" alt=""/><span>mineral hues</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--内容展示 结束-->


    <!--小火箭图标开始-->
    <div class="gotTop">
        <i><em>◆</em></i>
        <span></span>
    </div>
    <!--小火箭图标结束-->

</div>
<script src="find-js/common.js"></script>
<script src="find-js/find.js"></script>
<script>
    window.onload = function () {
        //table切换部分
        //找对象
        var title = document.getElementById("title");
        var ul = title.children[0];
        var lis = ul.children;
        var mc = document.getElementById("mc");
        var mcs = mc.children;
        var mc1 = mcs[0];
        var pics = mc1.children;
        console.log(pics[0].offsetHeight);
        var mc2 = mcs[1];
        var pics2 = mc2.children;
        console.log(pics2[0].offsetHeight);
        var mc3 = mcs[2];
        var pics3 = mc3.children;
        console.log(pics3[0].offsetHeight);


        var w = find.children[2].children[0];
//        var clientHeight = client().height;
//
//        mc.style.height = clientHeight + 5000 + "px";
//        //通过改变left值实现tab切换

        //让当前li高亮
        var clickNum = 0;//记录当前点击的li的位置
        for (var i = 0; i < lis.length; i++) {
            var li = lis[i];
            li.index = i;
            li.onclick = function () {
                clickNum = this.index;
                for (var i = 0; i < lis.length; i++) {
                    lis[i].className = "";
                }
                this.className = "current";
                var index = this.index;
                //排他，让所有的盒子全部隐藏 显示对应下标的盒子
//                for (var i = 0; i < mcs.length; i++) {
//                    mcs[i].style.display = "none";
//                }
                //显示对应下标的盒子
//                mc.children[index].style.display = "block";
                //点击的时候重新分配一下位置，点击了谁，就分配对应盒子里面的
                //第一个盒子已经在开始的时候分配了，就不需要分配了
//                if (clickNum == 1) {
//                    assign(pics2);
//                } else if (clickNum == 2) {
//                    assign(pics3);
//                }

                //思路2
                //让mc移动位置即可
                //因为W设置了overflow：hidden；后面的盒子又没给高度，无法
                //撑开盒子，所以必须在分配盒子前，设置W的高度
                //而向下滚动的时候，必须动态设置W的高度，这样才能将内容显示
                //让W的高度等于可视化区域的高度+被卷去头部的高度再加2000px
                //在滚动时设置
                mc.style.left = -index * 1000 + "px";
                if (index == 1) {
                    assign(pics2);
                } else if (index == 2) {
                    assign(pics3);
                }

            }

        }
        //在开始的时候就分配好每个盒子中，小盒子子的位置
        assign(pics);
        //分配图片位置
        function assign(arrPisc) {
            //判断一行放多少列 //w是１０００宽
            //封装瀑布流函数
            //放图片数=               总宽度/第一张图片自身宽度
            var cloumns = Math.floor(1000 / arrPisc[0].offsetWidth);
            var arr = [];//让第一行盒子的自身高度放入到这个数组
            for (var i = 0; i < cloumns; i++) {//头部能放的盒子用浮动
                //循环把头部盒子的自身高度加入数组
                arr.push(arrPisc[i].offsetHeight);
            }
            //找到最小的那个值
            for (var i = cloumns; i < arrPisc.length; i++) {
                //最矮盒子的高度
                var index = getMin(arr).index;
                //最矮盒子的下标
                var value = getMin(arr).value;
                //让头部盒子后面的盒子用绝对定位
                arrPisc[i].style.position = "absolute";
                //设置定位top值
                arrPisc[i].style.top = value + "px";
                //设置定位left值
                arrPisc[i].style.left = arrPisc[index].offsetLeft + "px";
                //让最小的高度+刚刚添加上来的盒子的自身高度
                arr[index] = value + arrPisc[i].offsetHeight;
            }

        }

        //设置瀑布流
        function setPool(parentObj, arrPics) {
            //后台数据源
            var datas = [
                {"src": "images1/1.jpg", "content": "morning tones"},
                {"src": "images1/2.jpg", "content": "vintage branch"},
                {"src": "images1/3.jpg", "content": "Design Seeds"},
                {"src": "images1/4.jpg", "content": "fresh hues no.95"},
                {"src": "images1/5.jpg", "content": "petaled tones"},
                {"src": "images1/6.jpg", "content": "aboard color"},
                {"src": "images1/7.jpg", "content": "concrete tones"},
                {"src": "images1/8.jpg", "content": "sparkle tones"},
                {"src": "images1/9.jpg", "content": "beached hues"},
                {"src": "images1/10.jpg", "content": "bicycle hues"},
                {"src": "images1/11.jpg", "content": "amethyst hues"},
                {"src": "images1/12.jpg", "content": "amethyst hues"},
                {"src": "images1/13.jpg", "content": "wreath hues"},
                {"src": "images1/14.jpg", "content": "petaled paper"},
                {"src": "images1/15.jpg", "content": "winter tones"},
                {"src": "images1/16.jpg", "content": "petaled paper"},
                {"src": "images1/17.jpg", "content": "autumn hues"},
                {"src": "images1/18.jpg", "content": "wreath hues"},
                {"src": "images1/19.jpg", "content": "hydrangea hues"},
                {"src": "images1/20.jpg", "content": "flora palette"},
                {"src": "images1/21.jpg", "content": "autumn flora"},
                {"src": "images1/22.jpg", "content": "nature hues"},
                {"src": "images1/23.jpg", "content": "spring tones"},
                {"src": "images1/24.jpg", "content": "sunny hues"},
                {"src": "images1/25.jpg", "content": "garlic tones"},
                {"src": "images1/26.jpg", "content": "color serving hues"},
                {"src": "images1/27.jpg", "content": "leaf greens"},
                {"src": "images1/28.jpg", "content": "elderberry tones"},
                {"src": "images1/29.jpg", "content": "still tones"},
                {"src": "images1/30.jpg", "content": "blueberry bright"},
            ]
            //页面被卷去的高度
            var scrollTop = scroll().top;
            //页面可视窗口的高度
            var clientHeight = client().height;
            //判断 当页面被卷去的高度+页面可视化高度>最后一个图片的顶部高度时
//            console.log("被卷去的高度=" + scrollTop + "可视窗口高度" + clientHeight + "最后一张图片的top" + arrPics[arrPics.length - 1].offsetTop)
            if (scrollTop + clientHeight > arrPics[arrPics.length - 1].offsetTop) {
                //需要加载新图片
                for (var i = 0; i < datas.length; i++) {
                    //创建新盒子
                    var div = document.createElement("div");
                    //指定类名
                    div.className = "pic";
                    //加入到父盒子中
                    parentObj.appendChild(div);
                    //拼接字符串
                    div.innerHTML = '<a><img src=' + datas[i].src + '></a>'
                            + '<p><img src="images1/pig.jpg" alt=""/>' +
                            '<span>' + datas[i].content + '</span></p>';
                }
                assign(arrPics);
            }
        }

        window.onscroll = function () {
            //动态设置W的高度
            //页面被卷去的高度
            var scrollTop = scroll().top;
            //页面可视窗口的高度
            var clientHeight = client().height;
            mc.style.height = scrollTop + clientHeight + 2000 + "px";

            if (scroll().top > 0) {
                //固定导航栏
                topNav.classList.add("fixed");
                main.style.marginTop = "50px";
            } else {
                topNav.classList.remove("fixed");
                main.style.marginTop = "0";
                arrow.style.display = "none";
            }

            if (scroll().top > 300) {
                arrow.style.display = "block";
            }
            //根据记录点击li的位置，显示不同内容的瀑布流与检测不同的触底事件
            if (clickNum == 0) {
                setPool(mc1, pics);
            } else if (clickNum == 1) {
                setPool(mc2, pics2);
            } else if (clickNum == 2) {
                setPool(mc3, pics3);
            }
        }


        //小火箭注册点击事件。让页面回到顶点
        var arrow = find.children[3];
        arrow.onclick = function () {
            var body = document.body;
            body.scrollTop = 200;
            var timer = setInterval(function () {
                var leader = body.scrollTop//
                leader = parseInt(leader) || 0;//如果没有这个样式，默认给0

                var step = (0 - leader) / 10;//最少跑1px
                if (step > 0) {
                    step = Math.ceil(step);
                } else {
                    step = Math.floor(step);
                }
                leader = leader + step;
                body.scrollTop = leader;
                if (leader == 0) {
                    clearInterval(timer);
                }
            }, 15);


        }
    }
</script>
</body>
</html>